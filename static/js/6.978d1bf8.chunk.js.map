{"version":3,"sources":["pages/Survey.module.css","components/Question.module.css","components/GeoInput.module.css","hooks/useKeyPress.js","functions/computeHasValue.js","components/GeoInput.js","components/Question.js","questions.yaml","pages/Survey.js"],"names":["module","exports","useKeyPress","keys","callback","useEffect","onKeyup","event","includes","key","window","addEventListener","removeEventListener","computeHasValue","value","options","min","Infinity","max","console","log","hasValue","Set","size","Array","isArray","length","String","isNaN","Object","MapScale","map","useMap","L","control","scale","addTo","MapSearch","withLocalization","getString","onChange","useState","typingTimeout","setTypingTimeout","provider","setProvider","OpenStreetMapProvider","params","email","handleChange","useCallback","clearTimeout","setTimeout","search","query","target","then","result","fitBounds","bounds","lat","y","lng","x","className","classes","searchInput","type","placeholder","MapZoom","handleZoomIn","zoomIn","handleZoomOut","zoomOut","zoomButtonsWrapper","zoomButton","onClick","MapEventHandler","onMap","useMapEvent","geoPrecision","geoShift","GeoInput","defaultValue","setMap","defaultValueLatLng","split","parseFloat","markerPos","setMarkerPos","preciseMarkerPos","setPreciseMarkerPos","rectangle","useRectangle","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","saveMapPos","roundedLat","Math","round","roundedLng","handleMapClick","latlng","handleMap","newMap","mapWrapper","MapContainer","center","zoom","scrollWheelZoom","zoomControl","TileLayer","attribution","url","Circle","radius","pathOptions","fillOpacity","color","Rectangle","fillColor","weight","lineCap","lineJoin","abc","ABC","toUpperCase","keys2listen","fluentByObject","_id","question","description","input","defaultValueObject","onSubmit","inputRef","useRef","setHasValue","required","firstDefaultValue","writeInDefaultValue","write_in","setValue","writeInValue","setWriteInValue","JSON","stringify","setValueJSON","setValueBoth","newValue","writeInIsActive","setWriteInIsActive","niceValue","hasValueNew","current","blur","index","indexOf","option","multiple","has","delete","add","oldValue","storeValue","newValueSet","storeNumberValue","storeGeoValue","storeWriteInValue","handleWriteInFocus","handleWriteInBlur","handleChoiceClick","handleSubmit","input_component","ref","onFocus","onBlur","thisOption","title","style","whiteSpace","display","marginBottom","button_key","margin","verticalAlign","fontWeight","fill","Localized","id","vars","latLngText","filter","Boolean","line","elems","strong","submit_incident","gql","getValueTitle","de","getValueTitleElement","Survey","uploaded","setUploaded","questions","setQuestions","questionsById","setQuestionsById","answers","setAnswers","currentQuestionsIndex","setCurrentQuestionsIndex","useMutation","onCompleted","onError","error","submitIncident","mutationLoading","loading","mutationError","a","fetch","questions_path","response","text","data","yaml","load","dataForArray","parse","dataForObject","entries","questionEntry","thisQuestionData","optionsEntry","reduce","obj","load_data","prevQuestion","nextQuestion","toTheBeginning","gotoFirstQuestion","nodeName","handleSendData","answersForSending","values","answer","warn","thisQuestion","variables","properties","ignoreResults","handleDownloadData","answersForDownload","now","Date","toISOString","nowForFilename","replace","textToWrite","fileNameToSaveAs","textFileAsBlob","Blob","downloadLink","document","createElement","download","innerHTML","webkitURL","href","createObjectURL","URL","onclick","parentNode","removeChild","body","appendChild","click","saveTextAsFile","thisValue","join","currentQuestion","answersArray","survey","progress","opacity","content","contentWrapper","rel","actions","disabled"],"mappings":"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","file":"static/js/6.978d1bf8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"survey\":\"Survey_survey__1FA27\",\"progress\":\"Survey_progress__2sfK1\",\"content\":\"Survey_content__3KwW1\",\"contentWrapper\":\"Survey_contentWrapper__n5nmh\",\"actions\":\"Survey_actions__27Ee9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"question\":\"Question_question__1iSNS\",\"button_key\":\"Question_button_key__1i8i4\",\"option\":\"Question_option__3f0DC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapWrapper\":\"GeoInput_mapWrapper__3HwMS\",\"map\":\"GeoInput_map__3L-Nl\",\"searchInput\":\"GeoInput_searchInput__1aYZ2\",\"zoomButtonsWrapper\":\"GeoInput_zoomButtonsWrapper__Nxaw_\",\"zoomButton\":\"GeoInput_zoomButton__n1Agi\"};","import { useEffect } from 'react'\n\nexport default function useKeyPress(keys, callback) {\n  useEffect(() => {\n    function onKeyup(event) {\n      if (keys.includes(event.key)) {\n        callback(event)\n      }\n    }\n    window.addEventListener('keyup', onKeyup)\n    return () => window.removeEventListener('keyup', onKeyup)\n  }, [keys, callback])\n}\n","export default function computeHasValue(value, options) {\n  const {\n    min = -Infinity,\n    max = Infinity\n  } = options || {}\n\n  console.log('value', value)\n  console.log('options', options)\n\n  let hasValue = false\n  if (typeof value === 'object' && value instanceof Set && value.size > 0) {\n    hasValue = true\n  } else if (Array.isArray(value) && value.length > 0) {\n    hasValue = true\n  } else if ((typeof value === 'string' || value instanceof String) && value.length > 0) {\n    hasValue = true\n  } else if (typeof value === 'number' && !isNaN(value)) {\n    if (value >= min && value <= max) {\n      hasValue = true\n    } else {\n      hasValue = false\n    }\n  } else if (typeof value === 'object' && value !== null && Object.keys(value).length > 0) {\n    hasValue = true\n  }\n  return hasValue\n}\n","import { useState, useEffect, useCallback } from 'react'\n\nimport { IonButton } from '@ionic/react'\n\nimport { withLocalization } from './fluent/Localized.js'\n\nimport { MapContainer, TileLayer, Circle, Rectangle, useMapEvent, useMap } from 'react-leaflet'\nimport 'leaflet/dist/leaflet.css'\n\nimport { OpenStreetMapProvider } from 'leaflet-geosearch'\n\nimport classes from './GeoInput.module.css'\nimport './GeoInputLeaflet.css'\n\nimport iconRetinaUrl from 'leaflet/dist/images/marker-icon-2x.png'\nimport iconUrl from 'leaflet/dist/images/marker-icon.png'\nimport shadowUrl from 'leaflet/dist/images/marker-shadow.png'\n\nfunction MapScale() {\n  const map = useMap()\n\n  useEffect(() => {\n    window.L.control.scale().addTo(map)\n  }, [map])\n\n  return null\n}\n\nfunction MapSearchTemp({ getString, map, onChange }) {\n  const [typingTimeout, setTypingTimeout] = useState()\n\n  const [provider, setProvider] = useState()\n\n  useEffect(() => {\n    setProvider(new OpenStreetMapProvider({ // TODO: Add more providers as a backup. And propably proxy through our api server.\n      params: {\n        email: 'tech@queerfeindlichkeit.de', // auth for large number of requests\n      },\n    }))\n  }, [setProvider])\n\n  const handleChange = useCallback(event => {\n    clearTimeout(typingTimeout)\n    setTypingTimeout(setTimeout(()=>{\n      if (!!provider && !!map) {\n        provider.search({ query: event.target.value })\n          .then(function (result) {\n            if (result.length > 0) {\n              map.fitBounds(result[0].bounds)\n              onChange({ lat: result[0].y, lng: result[0].x })\n              // map.setView({ lng: result[0].x, lat: result[0].y })\n            }\n          })\n      }\n    }, 500))\n  }, [typingTimeout, setTypingTimeout, provider, map, onChange])\n\n  return <input\n    className={classes.searchInput}\n    type=\"text\"\n    onChange={handleChange}\n    placeholder={getString('placeholder_search')}\n  />\n}\nconst MapSearch = withLocalization(MapSearchTemp)\n\nfunction MapZoom({ map }) {\n  const handleZoomIn = useCallback(event => {\n    if (!!map) {\n      map.zoomIn(1)\n    }\n  }, [map])\n\n  const handleZoomOut = useCallback(event => {\n    if (!!map) {\n      map.zoomOut(1)\n    }\n  }, [map])\n\n  return <div className={classes.zoomButtonsWrapper}>\n    <IonButton className={classes.zoomButton} onClick={handleZoomIn}>+</IonButton>\n    <IonButton className={classes.zoomButton} onClick={handleZoomOut}>-</IonButton>\n  </div>\n}\n\nfunction MapEventHandler({ onMap, onClick }) {\n  const map = useMap()\n\n  useEffect(() => {\n    onMap(map)\n  }, [onMap, map])\n\n  useMapEvent('click', onClick)\n\n  return null\n}\n\nconst geoPrecision = 100\nconst geoShift = 0.5 / geoPrecision\n\nfunction useRectangle({ lat, lng }) {\n  return [\n    [lat - geoShift, lng - geoShift],\n    [lat + geoShift, lng + geoShift],\n  ]\n}\n\nfunction GeoInput({ onChange, defaultValue }) {\n  const [map, setMap] = useState()\n\n  const defaultValueLatLng = (defaultValue || '').split(',').map(value => parseFloat(value))\n\n  const [markerPos, setMarkerPos] = useState({ lat: defaultValueLatLng[0] || 0, lng: defaultValueLatLng[1] || 0 })\n  const [preciseMarkerPos, setPreciseMarkerPos] = useState(markerPos)\n  const rectangle = useRectangle(markerPos)\n\n  useEffect(() => {\n    const L = window.L\n\n    delete L.Icon.Default.prototype._getIconUrl\n\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl,\n      iconUrl,\n      shadowUrl\n    })\n  }, [])\n\n  const saveMapPos = useCallback(({ lat, lng }) => {\n    let roundedLat = Math.round(lat * geoPrecision) / geoPrecision\n    let roundedLng = Math.round(lng * geoPrecision) / geoPrecision\n\n    if (roundedLat === markerPos.lat && roundedLng === markerPos.lng) {\n      roundedLat = 0\n      roundedLng = 0\n      lat = 0\n      lng = 0\n    }\n\n    setPreciseMarkerPos({ lat, lng })\n    setMarkerPos({ lat: roundedLat, lng: roundedLng })\n\n    if (roundedLat === 0 && roundedLng === 0) {\n      onChange(null)\n    } else {\n      onChange(`${roundedLat}, ${roundedLng}`)\n    }\n  }, [markerPos, setPreciseMarkerPos, setMarkerPos, onChange])\n\n  const handleMapClick = useCallback((event) => {\n    // if (event.originalEvent.target.classList.contains('leaflet-container')) { // check if event is coming from the map\n      let { lat, lng } = event.latlng\n      saveMapPos({ lat, lng })\n    // }\n  }, [saveMapPos])\n\n  const handleMap = useCallback((newMap) => {\n    setMap(newMap)\n  }, [setMap])\n\n  return <div className={classes.mapWrapper}>\n    <MapSearch map={map} onChange={saveMapPos}/>\n    <MapZoom map={map} />\n    <MapContainer\n      className={classes.map}\n      center={[51.2964955, 9.9019876]}\n      zoom={5.5}\n      scrollWheelZoom={false}\n      zoomControl={false}\n    >\n      {/* <TileLayer\n        attribution='© <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      /> */}\n      {/* <TileLayer\n        attribution='© <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors | © <a href=\"https://carto.com/attributions\" target=\"_blank\" rel=\"noreferrer\">CARTO</a>'\n        url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n        subdomains=\"abcd\"\n        maxZoom={19}\n      /> */}\n      {/* <TileLayer\n        attribution='© <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors'\n        url=\"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\"\n        subdomains=\"ab\"\n        maxZoom={19}\n      /> */}\n      <TileLayer\n        attribution='<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">© OpenStreetMap</a> <a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\">© Mapbox</a>'\n        url=\"https://api.mapbox.com/styles/v1/qiekub/cko1ikam20wgq18p9wd200uy0/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicWlla3ViIiwiYSI6ImNrbzFpY3NtZjA4dXQyb3M1OGU5czNqZzYifQ.UFFb9Vh5VldqZzdjempXPQ\"\n      />\n\n      {\n        preciseMarkerPos.lat !== markerPos.lat && preciseMarkerPos.lng !== markerPos.lng\n        ? <Circle center={preciseMarkerPos} radius={5} pathOptions={{ fillOpacity: 1, color: 'var(--primary-dark, black)' }} />\n        : null\n      }\n      {\n        markerPos.lat !== 0 && markerPos.lng !== 0\n        ? <Rectangle bounds={rectangle} pathOptions={{ fillColor: 'var(--primary, black)', color: 'var(--primary-dark, black)', fillOpacity: 0.3, weight: 5, lineCap: 'square', lineJoin: 'square' }} />\n        : null\n      }\n      <MapEventHandler onMap={handleMap} onClick={handleMapClick} />\n      <MapScale />\n    </MapContainer>\n  </div>\n}\n\nexport default GeoInput\n","import { useCallback, useEffect, useState, useRef } from 'react'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport computeHasValue from '../functions/computeHasValue.js'\n\nimport { IonButton } from '@ionic/react'\n\nimport { withLocalization, Localized } from './fluent/Localized.js'\n\nimport classes from './Question.module.css'\nimport GeoInput from './GeoInput.js'\n\nlet abc = 'abcdefghijklmnopqrstuvwxyz'\nconst ABC = abc.toUpperCase().split('')\nabc = abc.split('')\nconst keys2listen = ['Escape', 'Enter', ...abc, ...ABC]\n\nfunction Question({ fluentByObject, getString, _id, question, description, input = {}, defaultValue: defaultValueObject, onSubmit }) {\n  const inputRef = useRef()\n  const [hasValue, setHasValue] = useState(false)\n\n  input.required = false\n\n  const defaultValue = !!defaultValueObject ? defaultValueObject.value : new Set()\n  let firstDefaultValue = [...defaultValue]\n  if (firstDefaultValue.length > 0) {\n    firstDefaultValue = firstDefaultValue[0]\n  } else {\n    firstDefaultValue = null\n  }\n  const writeInDefaultValue = !!defaultValueObject ? defaultValueObject.write_in : null\n\n  const [value, setValue] = useState(defaultValue)\n  const [writeInValue, setWriteInValue] = useState(writeInDefaultValue)\n\n  const [, setValueJSON] = useState(JSON.stringify([...value]))\n\n  const setValueBoth = useCallback(newValue => {\n    setValue(newValue)\n    setValueJSON(JSON.stringify([...newValue]))\n  }, [setValue, setValueJSON])\n\n  const [writeInIsActive, setWriteInIsActive] = useState(false)\n\n  let niceValue = value\n  if (input.type === 'number') {\n    niceValue = parseFloat([...value][0])\n  } else if (input.type === 'short_text' || input.type === 'long_text') {\n    niceValue = [...value][0] + ''\n  } else if (input.type === 'choice') {\n    niceValue = [...value]\n  }\n\n  useEffect(() => {\n    const hasValueNew = computeHasValue(niceValue, {\n      min: (typeof input.min === 'number' ? input.min : -Infinity),\n      max: (typeof input.max === 'number' ? input.max : Infinity)\n    })\n    setHasValue(hasValueNew)\n  }, [niceValue, input.type, input.min, input.max, setHasValue])\n\n  useKeyPress(keys2listen, event => {\n    if (event.key === 'Escape') {\n      if (!!inputRef && !!inputRef.current) {\n        inputRef.current.blur()\n      }\n    } if (\n      event.key === 'Enter'\n      && (!input.required || (input.required && hasValue))\n    ) {\n      if (input.type === 'choice' && hasValue) {\n        onSubmit({\n          _id,\n          value,\n          ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n        })\n      } else if (\n        input.type === 'number'\n        || input.type === 'short_text'\n        || (input.type === 'long_text' && !writeInIsActive)\n      ) {\n        onSubmit({ _id, value })\n      }\n    } else if (input.type === 'choice' && !writeInIsActive) {\n      let index = abc.indexOf(event.key)\n      if (index <= -1) {\n        index = ABC.indexOf(event.key)\n      }\n      if (index >= 0 && input.options[index]) {\n        const option = input.options[index]._id\n\n        if (input.multiple === true) {\n          const newValue = value\n          if (newValue.has(option)) {\n            newValue.delete(option)\n          } else {\n            newValue.add(option)\n          }\n          setValueBoth(newValue)\n        } else {\n          let oldValue = [...value]\n          if (oldValue.length > 0) {\n            oldValue = oldValue[0]\n          } else {\n            oldValue = null\n          }\n\n          const newValue = new Set()\n          if (option !== oldValue) {\n            newValue.add(option)\n          }\n          setValueBoth(newValue)\n\n          if (!!onSubmit && option !== oldValue) {\n            onSubmit({\n              _id,\n              value: newValue,\n              ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n            })\n          }\n        }\n      }\n    }\n  })\n\n  const storeValue = useCallback(event => {\n    const newValueSet = new Set()\n    newValueSet.add(event.target.value)\n    setValueBoth(newValueSet)\n  }, [setValueBoth])\n\n  const min = !!input ? input.min || -Infinity : -Infinity\n  const max = !!input ? input.max || Infinity : Infinity\n  const storeNumberValue = useCallback(event => {\n    let newValue = parseFloat(event.target.value)\n    if (isNaN(newValue)) {\n      newValue = null\n    } else {\n      if (typeof min === 'number' && newValue < min) {\n        newValue = min\n      } else if (typeof max === 'number' && newValue > max) {\n        newValue = max\n      }\n    }\n\n    const newValueSet = new Set()\n    newValueSet.add(newValue)\n    setValueBoth(newValueSet)\n  }, [setValueBoth, min, max])\n\n  const storeGeoValue = useCallback(value => {\n    const newValueSet = new Set()\n    if (!!value) {\n      newValueSet.add(value)\n    }\n    setValueBoth(newValueSet)\n  }, [setValueBoth])\n\n  // START write in\n  const storeWriteInValue = useCallback(event => {\n    let option = event.target.value\n\n    if (input.type === 'number' && option !== '') {\n      option = parseFloat(option)\n      if (isNaN(option)) {\n        option = null\n      }\n    }\n\n    if (input.multiple === true) {\n      const newValue = value\n      newValue.delete(writeInValue) // delete old value\n      if (newValue.has(option)) {\n        newValue.delete(option)\n      } else if (option !== '') {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n    } else {\n      const newValue = new Set()\n      if (option !== '') {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n    }\n\n    setWriteInValue(option)\n  }, [input.type, input.multiple, value, writeInValue, setValueBoth, setWriteInValue])\n\n  const handleWriteInFocus = useCallback(() => {\n    setWriteInIsActive(true)\n  }, [setWriteInIsActive])\n\n  const handleWriteInBlur = useCallback(() => {\n    setWriteInIsActive(false)\n  }, [setWriteInIsActive])\n  // END write in\n\n  const handleChoiceClick = useCallback(option => {\n    if (input.multiple === true) {\n      const newValue = value\n      if (newValue.has(option)) {\n        newValue.delete(option)\n      } else {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n    } else {\n      let oldValue = [...value]\n      if (oldValue.length > 0) {\n        oldValue = oldValue[0]\n      } else {\n        oldValue = null\n      }\n\n      const newValue = new Set()\n      if (option !== oldValue) {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n\n      if (!!onSubmit && option !== oldValue) {\n        onSubmit({\n          _id,\n          value: newValue,\n          ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n        })\n      }\n    }\n  }, [value, setValueBoth, onSubmit, input.multiple, _id, writeInValue])\n\n  const handleSubmit = useCallback(() => {\n    if (!!onSubmit && (!input.required || (input.required && hasValue))) {\n      onSubmit({\n        _id,\n        value,\n        ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n      })\n    }\n  }, [input, hasValue, onSubmit, _id, value, writeInValue])\n\n  // auto focus input field\n  useEffect(() => {\n    // if (input.type !== 'choice' && !!inputRef && !!inputRef.current && !hasValue) {\n    //   inputRef.current.focus()\n    // }\n  }, [input.type, inputRef, hasValue])\n\n  // do nothing if no question supplied\n  if (!(!!_id)) {\n    return null\n  }\n\n  let input_component = null\n  if (input.type === 'number') {\n    input_component = <input ref={inputRef} type=\"number\" placeholder={getString('placeholder_number')} min={input.min || -Infinity} max={input.max || Infinity} onChange={storeNumberValue} defaultValue={firstDefaultValue} />\n  } else if (input.type === 'short_text' || input.type === 'date') { // TODO: date sollte ein eigenes echtes input sein, das direkt überprüft, ob es ein echtes Datum ist.\n    input_component = <input ref={inputRef} type=\"text\" placeholder={getString('placeholder_short_text')} onChange={storeValue} defaultValue={firstDefaultValue} />\n  } else if (input.type === 'long_text') {\n    input_component = <textarea\n      ref={inputRef}\n      onChange={storeValue}\n      onFocus={handleWriteInFocus}\n      onBlur={handleWriteInBlur}\n      defaultValue={firstDefaultValue}\n      placeholder={getString('placeholder_long_text')}\n    />\n  } else if (input.type === 'choice') {\n    input_component = <>\n      {\n        !!input.options\n          ? input.options.map((option, index) => {\n            const thisOption = fluentByObject(option)\n\n            let title = null\n            let description = null\n\n            if (typeof thisOption === 'string' || thisOption instanceof String) {\n              title = thisOption\n            } else {\n              if (!!thisOption.title) {\n                title = thisOption.title\n              }\n              if (!!thisOption.description) {\n                description = thisOption.description\n              }\n            }\n\n            if (title === null) {\n              return null\n            }\n\n            return <div\n                key={option._id}\n                className=\"body2\"\n                style={{ whiteSpace: 'nowrap', display: 'flex', marginBottom: '8px' }}\n              >\n              <span className={classes.button_key}>\n                {ABC[index]}\n              </span>\n              <p className=\"body2\" style={{ whiteSpace: 'normal', margin: '0' }}>\n                <IonButton\n                  style={{ verticalAlign: 'middle', margin: '0 0 2px 0', fontWeight: 'bold' }}\n                  fill={value.has(option._id) ? 'solid' : 'outline'}\n                  size=\"small\"\n                  onClick={() => handleChoiceClick(option._id)}\n                >\n                  {title}\n                </IonButton>\n                {\n                  description !== null\n                  ? <span style={{ margin: '0 0 0 8px' }}>{description}</span>\n                  : null\n                }\n              </p>\n            </div>\n          })\n        : null\n      }\n      {\n        !!input.write_in\n          ? <div>\n            <input\n              ref={inputRef}\n              type=\"text\"\n              placeholder={getString('placeholder_write_in_short_text')}\n              onChange={storeWriteInValue}\n              onFocus={handleWriteInFocus}\n              onBlur={handleWriteInBlur}\n              defaultValue={writeInDefaultValue}\n            />\n          </div>\n        : null\n      }\n    </>\n  } else if (input.type === 'geo') {\n    console.log('value', value)\n    input_component = <>\n      <GeoInput onChange={storeGeoValue} defaultValue={firstDefaultValue} />\n      {\n        value.size > 0\n        ? <p><Localized id=\"label_annonymized_coordinates\" vars={{ latLngText: [...value][0] }} /></p>\n        : null\n      }\n    </>\n  }\n\n  return (\n    <div className={classes.question}>\n      <h3 className=\"subtitle1\">{fluentByObject(question)}</h3>\n      {!!description ? fluentByObject(description, '').split('\\n').filter(Boolean).map(line => <p key={line}>{line}</p>) : null}\n      {input.required ? <p style={{ color: 'darkred', fontWeight: 'bold' }}><Localized id=\"required_question\" /></p> : null}\n      {input_component}\n      {\n        (hasValue || !input.required)\n        && (input.type !== 'choice' || input.write_in === true)\n          ? <p>\n            <IonButton style={{ verticalAlign: 'middle', margin: '0 16px 0 0' }} size=\"default\" onClick={handleSubmit}><Localized id=\"submit_question\" /></IonButton>\n            {\n              (\n                input.type === 'number'\n                || input.type === 'short_text'\n                || (input.type === 'long_text' && !writeInIsActive)\n                || (input.type === 'choice' && input.write_in === true && hasValue)\n              )\n              && (!input.required || (input.required && hasValue))\n              ? <span style={{ verticalAlign: 'middle' }}>\n                <Localized id=\"press_enter_info\" elems={{strong: <strong/>}} />\n              </span>\n              : null\n            }\n          </p>\n          : null\n      }\n    </div>\n  )\n}\n\nexport default withLocalization(Question)\n","export default __webpack_public_path__ + \"static/media/questions.5b5d7fd9.yaml\";","import { useEffect, useState, useCallback } from 'react'\nimport yaml from 'js-yaml'\n\nimport { IonButton } from '@ionic/react'\n\nimport { Localized } from '../components/fluent/Localized.js'\n\nimport classes from './Survey.module.css'\nimport Question from '../components/Question.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport computeHasValue from '../functions/computeHasValue.js'\n\nimport questions_path from '../questions.yaml'\n\nimport { gql, useMutation } from '@apollo/client'\n\nconst submit_incident = gql`\n  mutation ($text: String, $properties: JSONObject) {\n    incident(text: $text, properties: $properties)\n  }\n`\n\nfunction saveTextAsFile(textToWrite, fileNameToSaveAs) {\n  // source: https://stackoverflow.com/questions/609530/download-textarea-contents-as-a-file-using-only-javascript-no-server-side\n  var textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' })\n  var downloadLink = document.createElement('a')\n  downloadLink.download = fileNameToSaveAs\n  downloadLink.innerHTML = 'Download File'\n  if (window.webkitURL != null) {\n    // Chrome allows the link to be clicked\n    // without actually adding it to the DOM.\n    downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob)\n  }\n  else {\n    // Firefox requires the link to be added to the DOM\n    // before it can be clicked.\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob)\n    downloadLink.onclick = function () {\n      downloadLink.parentNode.removeChild(downloadLink)\n    }\n    downloadLink.style.display = 'none'\n    document.body.appendChild(downloadLink)\n  }\n\n  downloadLink.click()\n}\n\nconst mainTextQuestion = 'what_happened'\n\nfunction getValueTitle(value, options) {\n  const thisOption = !!options && !!options[value] ? options[value].de : value\n\n  let title = null\n\n  if (typeof thisOption === 'string' || thisOption instanceof String) {\n    title = thisOption\n  } else if (typeof thisOption === 'number' || !isNaN(thisOption)) {\n    title = thisOption + ''\n  } else {\n    if (!!thisOption.title) {\n      title = thisOption.title\n    }\n  }\n\n  return title\n}\n\nfunction getValueTitleElement(value, options) {\n  const title = getValueTitle(value, options)\n\n  if (typeof title === 'string') {\n    return title.split('\\n').map(line => <p key={line}>{line}</p>)\n  }\n\n  return title\n}\n\nfunction Survey() {\n  const [uploaded, setUploaded] = useState(false)\n  const [questions, setQuestions] = useState([])\n  const [questionsById, setQuestionsById] = useState({})\n  const [answers, setAnswers] = useState({})\n  const [currentQuestionsIndex, setCurrentQuestionsIndex] = useState(-1)\n\n  const [submitIncident, { loading: mutationLoading, error: mutationError }] = useMutation(submit_incident, {\n    onCompleted() {\n      setUploaded(true)\n    },\n    onError(error) {\n      console.error(error)\n    }\n  })\n\n  useEffect(() => {\n    async function load_data() {\n      let response = await fetch(questions_path)\n      let text = await response.text() // read response body as text\n\n      const data = yaml.load(text)\n\n      if (!!data && !!data.questions) {\n        const dataForArray = JSON.parse(JSON.stringify(data)) // TODO: Please check, why data needs to be cloned!\n        const dataForObject = JSON.parse(JSON.stringify(data)) // TODO: Please check, why data needs to be cloned!\n\n        setQuestions( // TODO: Somewhere in the following lines, data is would get overwritten if not cloned.\n          Object.entries(dataForArray.questions)\n          .map(questionEntry => {\n            let thisQuestionData = questionEntry[1]\n\n            if (!thisQuestionData.input) {\n              thisQuestionData.input = {}\n            }\n\n            if (!!thisQuestionData.input.options) {\n              thisQuestionData.input.options = Object.entries(thisQuestionData.input.options)\n                .map(optionsEntry => ({\n                  _id: optionsEntry[0],\n                  ...optionsEntry[1]\n                }))\n            }\n\n            return {\n              _id: questionEntry[0],\n              ...thisQuestionData\n            }\n          })\n        )\n\n        setQuestionsById(\n          Object.entries(dataForObject.questions)\n          .reduce((obj, questionEntry) => {\n            const _id = questionEntry[0]\n            let thisQuestionData = questionEntry[1]\n\n            if (!thisQuestionData.input) {\n              thisQuestionData.input = {}\n            }\n            if (!thisQuestionData.input.options) {\n              thisQuestionData.input.options = {}\n            }\n\n            obj[_id] = {\n              _id,\n              ...thisQuestionData\n            }\n\n            return obj\n          }, {})\n        )\n      } else {\n        setQuestionsById({})\n        setQuestions([])\n      }\n    }\n    load_data()\n  }, [setQuestions, setQuestionsById])\n\n  const handleChange = useCallback(data => {\n    if (!!data && !!data._id) {\n      if (computeHasValue(data.value)) {\n        answers[data._id] = data\n      } else if (!!answers[data._id]){\n        delete answers[data._id]\n      }\n      setAnswers(answers)\n    }\n    if (currentQuestionsIndex <= questions.length) {\n      setCurrentQuestionsIndex(currentQuestionsIndex + 1)\n    }\n  }, [setAnswers, answers, setCurrentQuestionsIndex, currentQuestionsIndex, questions.length])\n\n  const prevQuestion = useCallback(() => {\n    if (currentQuestionsIndex > -1) {\n      setCurrentQuestionsIndex(currentQuestionsIndex - 1)\n    }\n  }, [setCurrentQuestionsIndex, currentQuestionsIndex])\n\n  const nextQuestion = useCallback(() => {\n    if (currentQuestionsIndex <= questions.length) {\n      if (currentQuestionsIndex <= 0) { // if -1 (intro)\n        setCurrentQuestionsIndex(currentQuestionsIndex + 1)\n      } else { // if between 0 and questions.length\n        const currentQuestion = questions[currentQuestionsIndex]\n        if (!currentQuestion.input.required) {\n          setCurrentQuestionsIndex(currentQuestionsIndex + 1)\n        }\n      }\n    }\n  }, [setCurrentQuestionsIndex, currentQuestionsIndex, questions])\n\n  const toTheBeginning = useCallback(() => {\n    setCurrentQuestionsIndex(-1)\n  }, [setCurrentQuestionsIndex])\n\n  const gotoFirstQuestion = useCallback(() => {\n    setCurrentQuestionsIndex(0)\n  }, [setCurrentQuestionsIndex])\n\n  useKeyPress(['ArrowRight', 'ArrowLeft'], event => {\n    if (event.target.nodeName === 'BODY') {\n      if (event.key === 'ArrowUp' || event.key === 'ArrowLeft') {\n        prevQuestion()\n      } else {\n        nextQuestion()\n      }\n    }\n  })\n\n  const handleSendData = useCallback(() => {\n    let answersForSending = Object.values(answers)\n      .filter(answer => answer._id !== null && answer.value !== null)\n\n    if (answersForSending.length === 0) {\n      console.warn('⚠️ Keine Angaben. Unnötig abzusenden. But this if shoul\\'nt get called anyway.')\n    } else {\n      answersForSending = answersForSending\n        .reduce((obj, answer) => {\n          const thisQuestion = questionsById[answer._id]\n\n          const value = [...answer.value]\n          if (thisQuestion.input.multiple === true) {\n            obj[answer._id] = value\n          } else {\n            obj[answer._id] = value[0]\n          }\n          return obj\n        }, {})\n\n      const text = answersForSending[mainTextQuestion] || ''\n      delete answersForSending[mainTextQuestion]\n\n      submitIncident({\n        variables: {\n          text,\n          properties: answersForSending\n        },\n        ignoreResults: false\n      })\n    }\n  }, [answers, questionsById, submitIncident])\n\n  const handleDownloadData = useCallback(() => {\n    let answersForDownload = Object.values(answers)\n      .filter(answer => answer._id !== null && answer.value !== null)\n\n    if (answersForDownload.length === 0) {\n      console.warn('⚠️ Keine Angaben. Unnötig runterzuladen. But this if shoul\\'nt get called anyway.')\n    } else {\n      let now = new Date().toISOString()\n      now = now.replace(/T/g, ' ')\n      const nowForFilename = now.replace(/(:|\\.)/g, '-')\n\n      answersForDownload = `# Dein Vorfall (${now})\\n\\n${\n        answersForDownload.map(answer => {\n          const thisQuestion = questionsById[answer._id]\n          return `## ${\n            thisQuestion.question.de\n          }\\n\\n${\n            thisQuestion.input.multiple === true\n            ? [...answer.value].map(thisValue => `- ${getValueTitle(thisValue, thisQuestion.input.options)}`).join('\\n')\n            : getValueTitle([...answer.value][0], thisQuestion.input.options)\n          }`\n        }).join('\\n\\n')\n      }`\n\n      saveTextAsFile(answersForDownload, `Dein Vorfall ${nowForFilename}.md.txt`)\n    }\n  }, [answers, questionsById])\n\n  if (!(!!questions)) {\n    return null\n  }\n\n  const currentQuestion = questions[currentQuestionsIndex]\n\n  const answersArray = Object.values(answers)\n    .filter(answer => answer.value !== null)\n\n  return (\n    <div className={classes.survey}>\n      <div className={classes.progress} style={{\n        '--width': `${((currentQuestionsIndex) / questions.length) * 100}%`,\n        opacity: (currentQuestionsIndex <= 0 ? 0 : 1)\n      }} />\n      <div className={classes.content}>\n        <div className={classes.contentWrapper}>\n          {\n            currentQuestionsIndex === -1\n            ? <>\n                <h3>Vorfall melden</h3>\n                <p>Hier kannst du einen queerfeindlichen Vorfall melden.</p>\n                <p>Deine Daten dienen lediglich zur statistischen Auswertung. Sie führen nicht zu einer Anzeige bei der Polizei. Wir speichern deine Daten anonymiesiert.</p>\n                <p>Bei Fragen kannst du dich an <a href=\"mailto:info@queerfeindlichkeit.de\" target=\"_blank\" rel=\"noreferrer\">info@queerfeindlichkeit.de</a> wenden. Oder uns bei Instagram eine Nachricht schichen: <a href=\"https://instagram.com/queerfeindlichkeit\" target=\"_blank\" rel=\"noreferrer\">@queerfeindlichkeit</a></p>\n                <IonButton size=\"default\" onClick={gotoFirstQuestion}><Localized id=\"start_survey\" /></IonButton>\n            </>\n            : (\n              !!currentQuestion\n              ? <>\n                <Question\n                  key={currentQuestion._id}\n                  onSubmit={handleChange}\n                  defaultValue={answers[currentQuestion._id] || null}\n                  {...currentQuestion}\n                />\n              </>\n              : (\n                answersArray.length === 0\n                ? <>\n                  <h3>Hmmm…</h3>\n                  <p>Du hast keine Angaben gemacht. Beschreib deinen Vorfall bitte etwas detailierter.</p>\n                  <IonButton size=\"default\" onClick={toTheBeginning}><Localized id=\"back_to_beginning\" /></IonButton>\n                </>\n                : (\n                  uploaded\n                  ? <>\n                    <h3>Vielen Dank!</h3>\n                    <p>Dein Vorfall wurde hochgeladen.</p>\n                    <p><strong>Vielen Dank, dass Du hilfst Queerfeindlichkeit sichtbar zu machen!</strong></p>\n                            <p>Du möchtest wissen, wie es weitergeht? Auf <a href=\"https://www.instagram.com/queerfeindlichkeit/\" target=\"_blank\" rel=\"noreferrer\">Instagram</a> und  <a href=\"https://twitter.com/anyway_koeln\" target=\"_blank\" rel=\"noreferrer\">Twitter</a> veröffentlichen wir Daten und helfen dir gegen Queerfeindlichkeit anzukommen.</p>\n                    <hr />\n                    <p>Hier kannst du dir noch Deine Daten abspeichern:</p>\n                    <IonButton size=\"default\" onClick={handleDownloadData}><Localized id=\"download_your_incident_data\" /></IonButton>\n                  </>\n                  : <>\n                    <h3>Deine Angaben</h3>\n                    <p>Hier kannst du nochmal über deine Angaben drüber schauen.<br />Geh gerne zurück um etwas zu koorigieren.</p>\n                    <p>Wenn du zufrieden bist, klick unten auf <strong>„Vorfall eintragen”</strong>.</p>\n                    <p>Deine Daten kannst du dir unter <strong>„Daten runterladen”</strong>abspeichern.</p>\n                    <hr />\n                    {\n                      answersArray.map(answer => {\n                        const thisQuestion = questionsById[answer._id]\n\n                        return <div key={answer._id}>\n                          <div className=\"subtitle1\">{thisQuestion.question.de}</div>\n                          {\n                            thisQuestion.input.multiple === true\n                              ? <div><ul>\n                                {[...answer.value].map(thisValue => <li key={thisValue}>{getValueTitleElement(thisValue, thisQuestion.input.options)}</li>)}\n                              </ul></div>\n                              : getValueTitleElement([...answer.value][0], thisQuestion.input.options)\n                          }\n                        </div>\n                      })\n                    }\n                    <hr />\n                    <IonButton fill=\"outline\" size=\"default\" onClick={handleDownloadData}><Localized id=\"download_your_incident_data\" /></IonButton>\n                    <IonButton size=\"default\" onClick={handleSendData}><Localized id=\"submit_incident\" /></IonButton>\n                    {mutationLoading && <p><Localized id=\"uploading\" /></p>}\n                    {mutationError && <p><Localized id=\"error_while_uploading\" /></p>}\n                  </>\n                )\n              )\n            )\n          }\n        </div>\n      </div>\n      <div className={classes.actions}>\n        <IonButton disabled={currentQuestionsIndex <= -1} fill=\"outline\" size=\"default\" onClick={prevQuestion}>\n          <Localized id=\"prev\" />\n        </IonButton>\n        <IonButton disabled={currentQuestionsIndex >= questions.length || (!!currentQuestion && !!currentQuestion.input && currentQuestion.input.required)} fill=\"outline\" size=\"default\" onClick={nextQuestion}>\n          <Localized id=\"next\" />\n        </IonButton>\n      </div>\n    </div>\n  )\n}\n\nexport default Survey\n"],"sourceRoot":""}